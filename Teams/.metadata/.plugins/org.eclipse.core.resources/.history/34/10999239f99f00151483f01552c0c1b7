package squads.fsm;

import java.util.ArrayList;

import edu.warbot.agents.enums.WarAgentType;
import edu.warbot.agents.percepts.WarAgentPercept;
import edu.warbot.brains.WarBrain;
import edu.warbot.communications.WarMessage;

public abstract class State
{
	public Fsm fsm;
	public WarBrain wb;
	
	public ArrayList<WarMessage> mailbox;
	
	public ArrayList<WarAgentPercept> percepts;
	public ArrayList<WarAgentPercept> bases;
	public ArrayList<WarAgentPercept> foods;
	
	
	public State(Fsm fsm, WarBrain wb)
	{
		this.fsm = fsm;
		this.wb = wb;
	}
	
	public abstract String execute();
	public abstract void reflexe();
	
	public void update()
	{
		mailbox = new ArrayList<WarMessage>(wb.getMessages());
		
		percepts = new ArrayList<WarAgentPercept>(wb.getPercepts());
		for(WarAgentPercept p : percepts)
		{
			if(p.getType() == WarAgentType.WarFood)
			{
				foods.add(p);
			}
		}
	}
}
